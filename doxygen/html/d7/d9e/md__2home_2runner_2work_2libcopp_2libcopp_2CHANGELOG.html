<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libcopp: CHANGELOG</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libcopp<span id="projectnumber">&#160;2.3.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">CHANGELOG</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>2.3.2</h1>
<ol type="1">
<li>Rewrite document.</li>
<li>Support cmake 4+.</li>
</ol>
<h1>2.3.1</h1>
<ol type="1">
<li>Fixes storage types in <code>generator_vtable</code>.</li>
<li>Fixes format rule.</li>
</ol>
<h1>2.3.0</h1>
<ol type="1">
<li>Rename all macros <code>COPP_*</code> to <code>LIBCOPP_*</code> .</li>
<li>Make all macros in <a class="el" href="../../df/d29/compile__optimize_8h.html">compile_optimize.h</a> and explicit_declare. standalone from atframework.</li>
<li>Merge boost.fcontext 1.87.</li>
<li>Remove <code>LIBCOPP_MACRO_HAS_EXCEPTION</code>.</li>
<li>Add nostd <a class="el" href="../../d1/d7f/namespacetype__traits.html">type_traits</a> and <code>strong_rc_ptr</code> for non thread-safety smart pointer.</li>
<li>Remove <code>LIBCOPP_DISABLE_ATOMIC_LOCK</code>, <code>LIBCOPP_LOCK_DISABLE_THIS_MT</code> and <code>LIBCOPP_LOCK_DISABLE_MT</code>. We use the only one option <code>LIBCOPP_ENABLE_MULTI_THREAD</code> now.</li>
<li>Allow to disable multi-thread support for stack pool and C++20 coroutine to reduce cache miss.</li>
<li>We allow use lightweight callback or channel mode(without callback) for C++20 coroutine generator.</li>
<li>Add <code>copp::make_channel&lt;T&gt;()</code> to create channel receiver and sender for easier usage.</li>
</ol>
<h1>2.2.0</h1>
<ol type="1">
<li>Merge boost.fcontext 1.81.0</li>
<li>Add <code>LIBCOPP_MACRO_TLS_STACK_PROTECTOR</code> to work with <code>-fstack-protector</code></li>
<li>Optimize <code>-pthread</code> flag detection.</li>
<li>Support <code>-fno-rtti</code> now.</li>
<li>Optimize timestamp of generated file to reduce regeneration.</li>
</ol>
<h1>2.1.4</h1>
<ol type="1">
<li>Fixes timer reset when initialization.(#46 )</li>
<li>Update CI environment of GCC 4.8.</li>
<li>Add more strict warnings.</li>
<li>Optimize spin lock, add <code>valid()</code> for <code>task_promise</code>(C++ 20 coroutine).</li>
<li>Fix consistent of variant detection.</li>
</ol>
<h1>2.1.2</h1>
<ul>
<li>Update cmake-toolset</li>
<li>Implement <code>unhandled_exception</code> when without exception.</li>
</ul>
<h1>2.1.1</h1>
<ul>
<li>Add helper function to pick task id and private data from C++20 coroutine task</li>
<li>Fix trivial test</li>
<li>Fix <code>Valgrind_ROOT</code></li>
<li>Fix compatibility of GCC SFINAE</li>
<li>[CI] Add CodeQL job</li>
<li>[CI] Add auto stale job</li>
<li>[CI] Update linux image to ubuntu 22.04</li>
</ul>
<h1>2.1.0</h1>
<ol type="1">
<li>Allow custom <code>promise_error_transform</code> for C++20 coroutine.</li>
</ol>
<h1>2.0.2</h1>
<ol type="1">
<li>Add benchmark for <code>task_future</code></li>
<li>Fix lifetime of <code>task_future</code></li>
</ol>
<h1>2.0.1</h1>
<ol type="1">
<li>Change <code>task_manager&lt;task_type, container_type&gt;</code> to <code>task_manager&lt;task_type&gt;</code></li>
</ol>
<h1>2.0.0</h1>
<ol type="1">
<li>Add ABI tag for all c++ codes <blockquote class="doxtable">
<p>&zwj;We will keep ABI compatitablity for all assemblly APIs and will change the suffix when ABI changed. </p>
</blockquote>
2. <code>cotask::task</code> changes<ul>
<li>[x] Add <code>value_type</code> to task_macro ( <code><a class="el" href="../../d3/d30/structmacro__coroutine.html">macro_coroutine</a></code> )</li>
</ul>
</li>
<li>[Previous] Redesign C++ 20 coroutine support.</li>
<li>Using ctest to maintain test and samples</li>
<li>Fix compatibility for C++20 attributes and macros</li>
<li>[BREAK CHANGES] Rename <code>LIBCOPP_DISABLE_THIS_MT</code> to <code>LIBCOPP_LOCK_DISABLE_THIS_MT</code></li>
</ol>
<h1>1.5.0</h1>
<ol type="1">
<li>[BREAK CHANGES] We need gcc 4.8+, Clang 4.0+ or MSVC 1900(Visual Studio 2017)+<ul>
<li>Remove <code>COPP_MACRO_ENABLE_VARIADIC_TEMPLATE</code></li>
<li>Remove <code>STD_DECLTYPE</code> , <code>COPP_MACRO_TYPEOF</code></li>
<li>Remove <code>libcopp/utils/std/decltype.h</code></li>
<li>Remove <code>libcopp/utils/config/compiler_features.h</code></li>
<li>Remove <code>libcopp/utils/std/functional.h</code></li>
<li>Remove <code>libcopp/utils/std/smart_ptr.h</code></li>
</ul>
</li>
</ol>
<h1>1.4.1</h1>
<ol type="1">
<li>[OPTIMIZE] Allow to download submodule by external tool and do not depend <code>git</code>.</li>
</ol>
<h1>1.4.0</h1>
<ol type="1">
<li>[OPTIMIZE] Switch build system to to <a href="https://github.com/atframework/atframe_utils">cmake-toolset</a></li>
<li>[FIX] Fix output names of <code>find_package(&lt;PackageName&gt;)</code></li>
<li>[OPTIMIZE] Support auto detection of ios/android toolchains</li>
<li>[OPTIMIZE] Fix warnings when using cmake 3.20.0 or upper</li>
<li>[OPTIMIZE] Optimize cmake config PATH for <code>&lt;PackageName&gt;_DIR</code></li>
<li>[BREAK] Upgrade cmake requirement to 3.16.0+</li>
<li>[CI] Move to github action</li>
<li>[BOOST] Merge boost.context 1.76.0.</li>
</ol>
<h1>1.3.5</h1>
<ol type="1">
<li>[FIX] Fix stack alignment.</li>
<li>[OPTIMIZE] Prefer to use python3 on cmake scripts.</li>
</ol>
<h1>1.3.4</h1>
<ol type="1">
<li>[FIX] Fix version tag.</li>
</ol>
<h1>1.3.3</h1>
<ol type="1">
<li>[BOOST] Merge boost.context 1.74.0(Support The 32-bit Solaris C language data model, called ILP32).</li>
<li>[FIX] Fix mixed some headers with <a href="https://github.com/atframework/atframe_utils">atframe_utils</a> .</li>
<li>[OPTIMIZE] Some optimizations for benchmark codes.</li>
<li>[FIX] Fix multi-thread counter of unit test.</li>
<li>[OPTIMIZE] Support cpack to generate rpm or deb package.</li>
<li>[FIX] Fix c++20 coroutine flags when reimport CompilerOption.cmake.</li>
</ol>
<h1>1.3.2</h1>
<ol type="1">
<li>[FIX] <a href="https://github.com/owent/libcopp/issues/16">#16</a> : document of <code>LIBCOPP_DISABLE_ATOMIC_LOCK</code> and <code>LIBCOPP_DISABLE_THIS_MT</code> .</li>
<li>[FIX] <a href="https://github.com/owent/libcopp/issues/18">#18</a> : &lsquo;'xx&rsquo; is not a member of 'xxx {aka xxx}'<code>.</code></li>
<li><code>[OPTIMIZE]</code>cotask::task` can capture all integer type of return value now.</li>
<li>[FIX] Remove warning of c++20 coroutine options when project use both languages of cxx and not cxx</li>
</ol>
<h1>1.3.1 (2020-07-06)</h1>
<ol type="1">
<li>Fix compiler version checker for C++20 coroutine</li>
<li>Add cmake interface option and features for targets</li>
<li>Update documents</li>
</ol>
<h1>1.3.0 (2020-07-02)</h1>
<ol type="1">
<li>[OPTIMIZE] Using cmake export to generate module files</li>
<li>[OPTIMIZE] Change default visibility of symbols to hidden, we support dll on windows now.</li>
<li>[FIX] Rename <code>task::await</code><code>into</code><a class="el" href="../../d1/d76/classtask.html#abf0d23138dd6dfc156e7b7b5a6dd0ff3" title="await_task another cotask to finish">task::await_task</a><code>, Some compile don't allow</code>await_task<code>as function name.</code></li>
<li><code>[BOOST] Merge boost.context 1.73.0</code></li>
<li><code>[FEATURE] Implement context of windows fiber and</code>SetUnhandledExceptionFilter<code>is available to catchunhandled exception in coroutine action</code></li>
<li><code>[OPTIMIZE] Catch and rethrow unhandle exception after coroutine resumed when using C++11 or upper, most APIs are exception safe now.</code></li>
<li><code>[OPTIMIZE] Remove TTASK_MACRO in cotask::task, task id now is always set</code>uint64_t<code>and use the id allocator with thread cache.</code></li>
<li><code>[OPTIMIZE] Fix</code>Warning: client switching stacks?<code>in unit test when enable valgrind support.</code></li>
<li><code>[FEATURE] Enable</code>-DLIBCOPP_FCONTEXT_USE_TSX=ON` for default.</li>
</ol>
<h2>BREAK CHANGES &amp; UPGRADE GUIDE FROM 1.2.X</h2>
<ul>
<li>Rename <code>cotask::task::await</code> into <code>cotask::task::await_task</code></li>
<li>Replace <code>cotask::task&lt;TCO_MACRO, TTASK_MACRO&gt;</code> with <code>cotask::task&lt;TCO_MACRO&gt;</code>, we don't allow to custom id allocator now.</li>
<li>Replace <code>cotask::core::standard_int_id_allocator&lt;uint64_t&gt;</code> with <code>copp::util::uint64_id_allocator</code>, we don't allow to custom id allocator now.</li>
<li>Require gcc 4.7+, MSVC 14+ (Visual Studio 2015)</li>
<li>Require cmake 3.12.0 or upper</li>
</ul>
<h1>1.2.1 (2019-10-04)</h1>
<ol type="1">
<li>[OPTIMIZE] Add options to disable TLS usage for <em><a class="el" href="../../d9/df2/namespacethis__task.html">this_task</a></em> and <em><a class="el" href="../../d3/d31/namespacethis__coroutine.html">this_coroutine</a></em> to reduce cache miss on single thread situation.</li>
<li>[OPTIMIZE] Implement <b>jump_to(...)</b> as static inline to reduce code cache miss.</li>
<li>[OPTIMIZE] Implement <b>coroutine_context_callback(...)</b> as static local symbol to reduce code cache miss.</li>
</ol>
<h1>1.2.0 (2019-08-20)</h1>
<ol type="1">
<li>[OPTIMIZE] Add more unit test.Increase coverage to 90%+.</li>
<li>[OPTIMIZE] Rewrite toolchain detection scripts, support clang-cl now.</li>
<li>[BOOST] merge boost.context 1.71.0.</li>
<li>[FIX] Fix a coredump problem when task_ptr is reset when await_task other tasks.</li>
<li>[OPTIMIZE] Optimize timer implement, task_manager support modify task timer now.</li>
<li>[OPTIMIZE] A task can only be added to one task_manager now, and when finish task with task's API, task_manager will also be cleanup.</li>
<li>[OPTIMIZE] Fix some warning when compiling with gcc 9+ and clang 8+.</li>
<li>[OPTIMIZE] Use pthread for TLS when both c++11 thead_local and pthread are available. It will reduce the minimal stack size.</li>
<li>[OPTIMIZE] Fix and add some example codes and documents.</li>
</ol>
<h1>2018-12-07</h1>
<ol type="1">
<li>[OPTIMIZE] add adaptor for <a href="https://github.com/Microsoft/vcpkg">vcpkg</a></li>
<li>[OPTIMIZE] using <a href="https://cmake.org/cmake/help/v3.13/module/GNUInstallDirs.html">GNUInstallDirs</a> for all directories</li>
<li>[BOOST] merge boost.context 1.67.0</li>
<li>[OPTIMIZE] add libcopp-config.cmake and libcopp-config-version.cmake for cmake module</li>
<li>[OPTIMIZE] add <em><b>then</b></em> and <em><b>await_task</b></em> API for easier usage</li>
<li>[OPTIMIZE] add <em><b>/Zc:__cplusplus</b></em> for MSVC to make __cplusplus to the standard value.</li>
<li>[OPTIMIZE] fix a guess to x86_64 environment</li>
<li>[OPTIMIZE] add more API for statistics</li>
<li>[FIX] fix the problem that calling compare_exchange_weak failed will lead the cotask to exit</li>
<li>[OPTIMIZE] merge the latest unit test framework, now we will support more readable output when test failed.</li>
<li>[CI] We use xenial to build in linux now.</li>
</ol>
<h1>2018-01-01</h1>
<ol type="1">
<li>[BOOST] merge boost.context 1.66.0</li>
<li>[OPTIMIZE] add support for <a href="https://software.intel.com/en-us/node/695149">Intel Transactional Synchronisation Extensions (TSX)</a></li>
<li>[OPTIMIZE] fix a warning reported by clang-analyzer.</li>
<li>[CI] update README.md and automatic documents.(published at <a href="https://libcopp.atframe.work">https://libcopp.atframe.work</a>)</li>
<li>[FIX] make sure all the allocated stacks are always greater than the configure value after reloaded when using stack pool.</li>
<li>[FIX] allow segmented stacks when using clang and llvm.</li>
<li>[OPTIMIZE] using the new script to run clang-analyzer.</li>
<li>[OPTIMIZE] optimize the doxygen output and fix some markdown synax not supported by doxygen.</li>
</ol>
<h1>2017-10-01</h1>
<ol type="1">
<li>[OPTIMIZE] optimize cmake files for all target</li>
<li>[OPTIMIZE] update samples and readme(fix sample for stack pool in README.md)</li>
<li>[CI] add gcc 7</li>
<li>[OPTIMIZE] using -std=c++17 for gcc/clang and /std:c++17 for MSVC 15(2015) and upper</li>
</ol>
<h1>2017-06-11</h1>
<ol type="1">
<li>[OPTIMIZE] V2 framework and APIs completed, all reports in clang-analysis and cppcheck are fixed.</li>
<li>[CI] benchmark and samples enabled in v2 branch</li>
<li>[CI] add sample code in README.md into CI</li>
</ol>
<h1>2017-05-10</h1>
<ol type="1">
<li>[BOOST] merge boost.context 1.64.0</li>
<li>[OPTIMIZE] add stack pool manager and unit test</li>
<li>[OPTIMIZE] reduce memory fragment when allocate coroutine task and task action</li>
<li>[CI] benchmark and sample will always be run in <a href="https://travis-ci.org/owt5008137/libcopp">Travis CI</a> and <a href="https://ci.appveyor.com/project/owt5008137/libcopp">Appveyor CI</a></li>
</ol>
<h1>2016-06-16</h1>
<ol type="1">
<li>[BOOST] merge boost.context 1.61.0 and use the new jump progress(see <a href="https://owent.net/2016/1270.html">https://owent.net/2016/1270.html</a> for detail)</li>
<li>[BOOST] enable valgrind support if valgrind/valgrind.h exists</li>
<li>[CXX] use cmake to detect the function of compiler</li>
<li>[OPTIMIZE] using pthread key when c++11 TLS not available</li>
<li>[OPTIMIZE] remove coroutine_context_safe_base.coroutine_context_base is also thread safe now</li>
<li>[OPTIMIZE] remove all global variables of cotask</li>
<li>[OPTIMIZE] remove std/thread.hï¼Œ add noexpect if available</li>
<li>[CI] CI use build matrix to test more compiler</li>
<li>[BUILD] use RelWithDebInfo for default</li>
</ol>
<h1>2016-02-27</h1>
<ol type="1">
<li>v0.2.0, this version is used in our server for about one year.</li>
</ol>
<h1>2015-12-29</h1>
<ol type="1">
<li>add support for valgrind</li>
<li>add ci configure</li>
<li>merge boost.context 1.60.0</li>
<li>add -fPIC, fix spin lock</li>
<li>some environment do not support TLS, make these environment can compile success</li>
</ol>
<h1>2014-07-25</h1>
<p>v0.1.0 </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
